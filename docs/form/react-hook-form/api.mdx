---
sidebar_position: 2
title: API
---

import Props, { Prop, Divider } from '../../../src/components/Props'
import CommonFormProps from '../../../src/commonProps/formProps.mdx'

# React Hook Form - API

## `<Form />`

> `<Form />` renders a `<form>` HTML element and create a context for the controls. All controls rendered inside this components will be register automatically with `React Hook Form`.

### Props

<Props>
  <Prop icon="rhf.png" name="form" type="object">
    Result of <a href="https://react-hook-form.com/api/useform" target="_blank"><code>useForm()</code></a>
  </Prop>

  <Prop icon="rhf.png" name="onSubmit" type="function">
    Forwarded to <a href="https://react-hook-form.com/api/useform/handlesubmit" target="_blank"><code>handleSubmit()</code></a>
  </Prop>

  <Divider />
  <CommonFormProps />
</Props>


### Examples
#### Without a form instance
```jsx
import Form from '@concrete-form/react-hook-form'
import Input from '@concrete-form/html5/Input'
import SubmitButton from '@concrete-form/html5/SubmitButton'

const App = () => {
  const onSubmit = data => { console.log(data) }

  return (
    <Form onSubmit={onSubmit}>
      <Input name="firstName" />
      <SubmitButton>submit</Submit>
    </Form>
  )
}
```

:::info
 When missing, a form instance is created automatically with [`useForm()`](https://react-hook-form.com/api/useform) and the default parameters.
:::

#### With an existing form instance
```jsx
import { useForm } from 'react-hook-form'
import Form from '@concrete-form/react-hook-form'
import Input from '@concrete-form/html5/Input'
import SubmitButton from '@concrete-form/html5/SubmitButton'

const App = () => {
  const form = useForm({
    mode: 'onTouched',
    criteriaMode: 'all',
  })

  const onSubmit = data => { console.log(data) }

  return (
    <Form form={form} onSubmit={onSubmit}>
      <Input name="firstName" />
      <SubmitButton>submit</Submit>
    </Form>
  )
}
```

### React Hook Form context

The `React Hook Form` Context is automatically exposed so it's possible to use [`useFormContext()`](https://react-hook-form.com/api/useformcontext) normally inside `<Form />`.

## Custom field properties

With any `Concrete Form` control, you can provide a prop `fieldProps`. If provided, that object will be forwared to [`register()`](https://react-hook-form.com/api/useform/register).

### Example

```jsx
import Form from '@concrete-form/react-hook-form'
import Input from '@concrete-form/html5/Input'

const App = () => (
  <Form>
    <Input
      name="firstName"
      fieldProps={{
        required: true,
        min: { value: 5, message: 'too short !' }
      }}
    />
  </Form>
)
```

## Validation translations
:::tip
Learn how to **[handle translations](/docs/translations)**
:::

With `React Hook Form`, it's possible to add field-level validation during [register()](https://react-hook-form.com/api/useform/register). **If you don't provide an error message**, a generic one will be used.

| `RHF` Validation | Generic fallback key | Default (en) |
| --- | --- | --- |
| **required** | ` required ` | this field is required |
| **minLength** | ` minlength ` | this field must be at least `{{min}}` characters |
| **maxLength** | ` maxlength ` | this field must be at most `{{max}}` characters |
| **min** | ` min ` | this field must be greater than or equal to `{{min}}` |
| **max** | ` max ` | this field must be less than or equal to `{{max}}` |
| *default* | ` default ` | this field is invalid |


:::tip Schema Validation
We strongly beleive that [Schema Validation](https://react-hook-form.com/get-started#SchemaValidation) is a better option instead of field-level rules. Schema validation (such as [Yup](https://github.com/jquense/yup)) will provide better reusability and maintainability.
:::

## Translations metadata

Whenever an error is generated by `React Hook Form` field-level validation, some metadata are provided to the validator, here is an example :

```json
{
  "meta": {
    "from": "react-hook-form",
    "args": {
      "type": "minLength",
      "options": {
        "min": 15
      }
    }
  }
}
```

- `from` : **react-hook-form**
- `type` is the original error type from `React Hook Form`
- `options` is a copy of the object provided to [`register()`](https://react-hook-form.com/api/useform/register)